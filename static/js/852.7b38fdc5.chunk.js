"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[852],{1852:function(e,n,t){t.r(n),t.d(n,{default:function(){return oe}});var i=t(2791),r=t(9439),a=t(4554),o=t(9836),s=t(3382),l=t(3994),c=t(9281),d=t(6890),u=t(7002),h=t(5855),m=t(720),g=t(4663),f=t(890),x=t(5527),p=t(3400),Z=t(7247),v=t(5573),b=t(4942),j=t(1413),C=t(6151),w=t(9218),P=t(5289),S=t(7123),k=t(9157),y=t(1691),q=t(5661),L=t(1070),_=t(1134),A=t(2765),F=t(5985),I=t(2014),R=t(184);var T=function(e){var n,t,a=e.title,o=e.submitButtonName,s=e.icon,l=e.user,c=void 0===l?{name:"",number:""}:l,d=e.allUsers,u=void 0===d?[]:d,h=e.submitForm,m=e.isLoading,g=(0,i.useState)(!1),f=(0,r.Z)(g,2),x=f[0],Z=f[1],v=(0,i.useState)(c),T=(0,r.Z)(v,2),U=T[0],B=T[1],D=(0,i.useState)(u),M=(0,r.Z)(D,2),W=M[0],Y=M[1],E=(0,_.cI)(),N=E.register,z=E.handleSubmit,G=E.formState.errors,$=E.reset,O=function(){Z(!1),$()},Q=function(e){if(H(e.name))F.Am.error(A.sY.userIsExist);else{var n=c.id?{id:c.id,credentials:e}:e;h(n),$(),Z(!1)}},V=function(e){B((0,j.Z)((0,j.Z)({},U),{},(0,b.Z)({},e.target.name,e.target.value)))},H=function(e){return W.find((function(n){return n.name===e}))};return(0,R.jsxs)("div",{children:[m?(0,R.jsx)(I.$,{}):(0,R.jsx)(p.Z,{onClick:function(e){Z(!0),B(c),Y(u)},children:s}),(0,R.jsx)(P.Z,{open:x,fullWidth:!0,onClose:O,children:(0,R.jsxs)(L.Z,{autoComplete:"on",noValidate:!0,onSubmit:z(Q),children:[(0,R.jsx)(q.Z,{children:a}),(0,R.jsxs)(k.Z,{children:[(0,R.jsx)(y.Z,{children:"Attention! All fields are required!"}),(0,R.jsx)(w.Z,(0,j.Z)((0,j.Z)({required:!0,autoFocus:!0,margin:"dense",id:"name",label:"User name",type:"text",fullWidth:!0,variant:"standard"},N("name",{required:{value:!0,message:A.sY.isRequired}})),{},{error:!!G.name,helperText:null===(n=G.name)||void 0===n?void 0:n.message,onChange:V,value:null===U||void 0===U?void 0:U.name})),(0,R.jsx)(w.Z,(0,j.Z)((0,j.Z)({required:!0,margin:"dense",id:"number",label:"Phone number",type:"tel",fullWidth:!0,variant:"standard"},N("number",{required:{value:!0,message:A.sY.isRequired},pattern:{value:/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){10,14}(\s*)?$/,message:A.sY.wrongInput}})),{},{error:!!G.number,helperText:null===(t=G.number)||void 0===t?void 0:t.message,onChange:V,value:null===U||void 0===U?void 0:U.number}))]}),(0,R.jsxs)(S.Z,{children:[(0,R.jsx)(C.Z,{onClick:O,children:"Cancel"}),(0,R.jsx)(C.Z,{type:"submit",onClick:z(Q),children:o})]})]})})]})},U=t(4524),B=t(8687),D=t(1634),M=t(736),W=t(5403),Y=t(7630),E=t(2065),N=t(1572),z=(0,Y.ZP)("div")((function(e){var n=e.theme;return(0,b.Z)({position:"relative",borderRadius:n.shape.borderRadius,backgroundColor:(0,E.Fq)(n.palette.common.white,.15),"&:hover":{backgroundColor:(0,E.Fq)(n.palette.common.white,.25)},marginLeft:0,width:"100%"},n.breakpoints.up("sm"),{marginLeft:n.spacing(1),width:"auto"})})),G=(0,Y.ZP)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),$=(0,Y.ZP)(N.ZP)((function(e){var n=e.theme;return{color:"inherit","& .MuiInputBase-input":(0,b.Z)({padding:n.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(n.spacing(4),")"),transition:n.transitions.create("width"),width:"100%"},n.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),O=function(){var e=(0,B.useDispatch)(),n=(0,B.useSelector)(M.sellectFilter);return(0,R.jsxs)(z,{children:[(0,R.jsx)(G,{children:(0,R.jsx)(W.Z,{})}),(0,R.jsx)($,{placeholder:"Search\u2026",inputProps:{"aria-label":"search"},value:n,onChange:function(n){e((0,D.E1)(n.currentTarget.value))}})]})},Q=t(750),V=t(8687).useSelector,H=t(750).useGetContactQuery,J=t(736).sellectFilter;function K(e,n,t){return n[t]<e[t]?-1:n[t]>e[t]?1:0}function X(e,n){return"desc"===e?function(e,t){return K(e,t,n)}:function(e,t){return-K(e,t,n)}}function ee(e,n){var t=e.map((function(e,n){return[e,n]}));return t.sort((function(e,t){var i=n(e[0],t[0]);return 0!==i?i:e[1]-t[1]})),t.map((function(e){return e[0]}))}var ne=[{id:"id",numeric:!0,disablePadding:!1,label:"N"},{id:"name",numeric:!1,disablePadding:!1,label:"User name"},{id:"number",numeric:!0,disablePadding:!1,label:"Phone number"},{id:"deleteContact",numeric:!0,disablePadding:!1,label:"Delete contact"}];function te(e){var n=e.order,t=e.orderBy,i=e.onRequestSort;return(0,R.jsx)(d.Z,{children:(0,R.jsx)(h.Z,{children:ne.map((function(e){return(0,R.jsx)(l.Z,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:t===e.id&&n,children:(0,R.jsxs)(m.Z,{active:t===e.id,direction:t===e.id?n:"asc",onClick:(r=e.id,function(e){i(e,r)}),children:[e.label,t===e.id?(0,R.jsx)(a.Z,{component:"span",sx:v.Z,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var r}))})})}function ie(e){var n=e.contactsCount,t=e.allUsersArray,i=(0,Q.useAddContactMutation)(),a=(0,r.Z)(i,2),o=a[0],s=a[1].isLoading;return(0,R.jsxs)(g.Z,{children:[(0,R.jsxs)(f.Z,{sx:{flex:"1 1 100%"},variant:"h6",id:"tableTitle",component:"div",children:["Contacts [",n,"]"]}),0!==n&&(0,R.jsx)(O,{}),(0,R.jsx)(T,{title:"Add new contact",submitButtonName:"Add contact",icon:(0,R.jsx)(U.Z,{fontSize:"large"}),allUsers:t,submitForm:o,isLoading:s})]})}function re(){var e=i.useState("asc"),n=(0,r.Z)(e,2),t=n[0],d=n[1],m=i.useState("name"),g=(0,r.Z)(m,2),f=g[0],v=g[1],b=i.useState(0),j=(0,r.Z)(b,2),C=j[0],w=j[1],P=i.useState(5),S=(0,r.Z)(P,2),k=S[0],y=S[1],q=(0,Q.useDeleteContactMutation)(),L=(0,r.Z)(q,2),_=L[0],A=L[1].isLoading,F=function(){var e=H(),n=e.data,t=void 0===n?[]:n,i=e.error,r=e.isLoading,a=V(J).toLowerCase();return{filteredContacts:t.filter((function(e){return e.name.toLowerCase().includes(a)})),contacts:t,options:{error:i,isLoading:r}}}(),I=F.filteredContacts,T=F.contacts,U=C>0?Math.max(0,(1+C)*k-I.length):0;return(0,R.jsx)(a.Z,{sx:{width:"100%"},children:(0,R.jsxs)(x.Z,{sx:{width:"100%",mb:2},children:[(0,R.jsx)(ie,{contactsCount:T.length,allUsersArray:T}),(0,R.jsx)(c.Z,{children:(0,R.jsxs)(o.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",children:[(0,R.jsx)(te,{order:t,orderBy:f,onRequestSort:function(e,n){d(f===n&&"asc"===t?"desc":"asc"),v(n)},rowCount:T.length}),0!==I.length&&(0,R.jsxs)(s.Z,{children:[ee(I,X(t,f)).slice(C*k,C*k+k).map((function(e,n,t){var i="enhanced-table-checkbox-".concat(n),r=n+1;return(0,R.jsxs)(h.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:[(0,R.jsx)(l.Z,{component:"th",id:i,scope:"row",padding:"normal",align:"right",width:40,children:r}),(0,R.jsx)(l.Z,{align:"left",children:e.name}),(0,R.jsx)(l.Z,{align:"right",children:e.number}),(0,R.jsx)(l.Z,{align:"right",children:(0,R.jsx)(p.Z,{onClick:function(){return n=e.id,void(A||_(n));var n},children:(0,R.jsx)(Z.Z,{})})})]},e.id)})),U>0&&(0,R.jsx)(h.Z,{style:{height:53*U},children:(0,R.jsx)(l.Z,{colSpan:6})})]})]})}),0===I.length?(0,R.jsx)(a.Z,{sx:{width:"100%",p:2,display:"flex",alignItems:"center",justifyContent:"center"},children:"The phonebook is empty"}):(0,R.jsx)(u.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:I.length,rowsPerPage:k,page:C,onPageChange:function(e,n){w(n)},onRowsPerPageChange:function(e){y(parseInt(e.target.value,10)),w(0)}})]})})}var ae=t(1214),oe=function(){return(0,R.jsx)(ae.Z,{children:(0,R.jsx)(re,{})})}},1070:function(e,n,t){t.d(n,{Z:function(){return a}});var i=t(9457),r=(t(2791),t(184)),a=function(e){var n=e.children,t=e.autoComplete,a=e.onSubmit;return(0,r.jsx)("form",{onSubmit:a,autoComplete:t,children:(0,r.jsx)(i.x,{display:"flex",flexDirection:"column",gridGap:4,children:n})})}},736:function(e,n,t){t.r(n),t.d(n,{sellectFilter:function(){return i}});var i=function(e){return e.filter}}}]);
//# sourceMappingURL=852.7b38fdc5.chunk.js.map