"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[852],{1852:function(e,n,t){t.r(n),t.d(n,{default:function(){return oe}});var i=t(2791),r=t(9439),a=t(4554),o=t(9836),s=t(3382),l=t(3994),d=t(9281),c=t(6890),u=t(7002),h=t(5855),m=t(720),g=t(4663),f=t(890),x=t(5527),p=t(3400),Z=t(7247),v=t(5573),b=t(2765),j=t(4942),C=t(1413),w=t(6151),P=t(9218),S=t(5289),k=t(7123),y=t(9157),q=t(1691),L=t(5661),_=t(1070),A=t(1134),F=t(5985),I=t(2014),R=t(184);var B=function(e){var n,t,a=e.title,o=e.submitButtonName,s=e.icon,l=e.user,d=void 0===l?{name:"",number:""}:l,c=e.allUsers,u=void 0===c?[]:c,h=e.submitForm,m=e.isLoading,g=(0,i.useState)(!1),f=(0,r.Z)(g,2),x=f[0],Z=f[1],v=(0,i.useState)(d),B=(0,r.Z)(v,2),D=B[0],T=B[1],U=(0,i.useState)(u),Y=(0,r.Z)(U,2),E=Y[0],M=Y[1],W=(0,A.cI)(),z=W.register,G=W.handleSubmit,N=W.formState.errors,$=W.reset,O=function(){Z(!1),$()},Q=function(e){if(H(e.name))F.Am.error(b.sY.userIsExist);else{var n=d.id?{id:d.id,credentials:e}:e;h(n),$(),Z(!1)}},V=function(e){T((0,C.Z)((0,C.Z)({},D),{},(0,j.Z)({},e.target.name,e.target.value)))},H=function(e){return E.find((function(n){return n.name===e}))};return(0,R.jsxs)("div",{children:[m?(0,R.jsx)(I.$,{}):(0,R.jsx)(p.Z,{onClick:function(e){Z(!0),T(d),M(u)},children:s}),(0,R.jsx)(S.Z,{open:x,fullWidth:!0,onClose:O,children:(0,R.jsxs)(_.Z,{autoComplete:"on",noValidate:!0,onSubmit:G(Q),children:[(0,R.jsx)(L.Z,{children:a}),(0,R.jsxs)(y.Z,{children:[(0,R.jsx)(q.Z,{children:"Attention! All fields are required!"}),(0,R.jsx)(P.Z,(0,C.Z)((0,C.Z)({required:!0,autoFocus:!0,margin:"dense",id:"name",label:"User name",type:"text",fullWidth:!0,variant:"standard"},z("name",{required:{value:!0,message:b.sY.isRequired}})),{},{error:!!N.name,helperText:null===(n=N.name)||void 0===n?void 0:n.message,onChange:V,value:null===D||void 0===D?void 0:D.name})),(0,R.jsx)(P.Z,(0,C.Z)((0,C.Z)({required:!0,margin:"dense",id:"number",label:"Phone number",type:"tel",fullWidth:!0,variant:"standard"},z("number",{required:{value:!0,message:b.sY.isRequired},pattern:{value:/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){10,14}(\s*)?$/,message:b.sY.wrongInput}})),{},{error:!!N.number,helperText:null===(t=N.number)||void 0===t?void 0:t.message,onChange:V,value:null===D||void 0===D?void 0:D.number}))]}),(0,R.jsxs)(k.Z,{children:[(0,R.jsx)(w.Z,{onClick:O,children:"Cancel"}),(0,R.jsx)(w.Z,{type:"submit",onClick:G(Q),children:o})]})]})})]})},D=t(4524),T=t(8687),U=t(1634),Y=t(736),E=t(5403),M=t(7630),W=t(2065),z=t(1572),G=(0,M.ZP)("div")((function(e){var n=e.theme;return(0,j.Z)({position:"relative",borderRadius:n.shape.borderRadius,backgroundColor:(0,W.Fq)(n.palette.common.white,.15),"&:hover":{backgroundColor:(0,W.Fq)(n.palette.common.white,.25)},marginLeft:0,width:"100%"},n.breakpoints.up("sm"),{marginLeft:n.spacing(1),width:"auto"})})),N=(0,M.ZP)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),$=(0,M.ZP)(z.ZP)((function(e){var n=e.theme;return{color:"inherit","& .MuiInputBase-input":(0,j.Z)({padding:n.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(n.spacing(4),")"),transition:n.transitions.create("width"),width:"100%"},n.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),O=function(){var e=(0,T.useDispatch)(),n=(0,T.useSelector)(Y.sellectFilter);return(0,R.jsxs)(G,{children:[(0,R.jsx)(N,{children:(0,R.jsx)(E.Z,{})}),(0,R.jsx)($,{placeholder:"Search\u2026",inputProps:{"aria-label":"search"},value:n,onChange:function(n){e((0,U.E1)(n.currentTarget.value))}})]})},Q=t(8687).useSelector,V=t(750).useGetContactQuery,H=t(736).sellectFilter,J=t(750);function K(e,n,t){return n[t]<e[t]?-1:n[t]>e[t]?1:0}function X(e,n){return"desc"===e?function(e,t){return K(e,t,n)}:function(e,t){return-K(e,t,n)}}function ee(e,n){var t=e.map((function(e,n){return[e,n]}));return t.sort((function(e,t){var i=n(e[0],t[0]);return 0!==i?i:e[1]-t[1]})),t.map((function(e){return e[0]}))}var ne=[{id:"id",numeric:!0,disablePadding:!1,label:"\u2116"},{id:"name",numeric:!1,disablePadding:!1,label:"Contact name"},{id:"number",numeric:!0,disablePadding:!1,label:"Phone number"},{id:"deleteContact",numeric:!0,disablePadding:!1,label:"Delete"}];function te(e){var n=e.order,t=e.orderBy,i=e.onRequestSort;return(0,R.jsx)(c.Z,{children:(0,R.jsx)(h.Z,{children:ne.map((function(e){return(0,R.jsx)(l.Z,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:t===e.id&&n,children:(0,R.jsxs)(m.Z,{active:t===e.id,direction:t===e.id?n:"asc",onClick:(r=e.id,function(e){i(e,r)}),children:[e.label,t===e.id?(0,R.jsx)(a.Z,{component:"span",sx:v.Z,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var r}))})})}function ie(e){var n=e.contactsCount,t=e.allUsersArray,i=(0,J.useAddContactMutation)(),a=(0,r.Z)(i,2),o=a[0],s=a[1].isLoading;return(0,R.jsxs)(g.Z,{children:[(0,R.jsxs)(f.Z,{sx:{flex:"1 1 100%"},variant:"h6",id:"tableTitle",component:"div",children:["Contacts [",n,"]"]}),0!==n&&(0,R.jsx)(O,{}),(0,R.jsx)(B,{title:"Add new contact",submitButtonName:"Add contact",icon:(0,R.jsx)(D.Z,{fontSize:"large"}),allUsers:t,submitForm:o,isLoading:s})]})}function re(){var e=i.useState("asc"),n=(0,r.Z)(e,2),t=n[0],c=n[1],m=i.useState("name"),g=(0,r.Z)(m,2),f=g[0],v=g[1],j=i.useState(0),C=(0,r.Z)(j,2),w=C[0],P=C[1],S=i.useState(5),k=(0,r.Z)(S,2),y=k[0],q=k[1],L=(0,J.useDeleteContactMutation)(),_=(0,r.Z)(L,2),A=_[0],F=_[1].isLoading,I=function(){var e=V(),n=e.data,t=void 0===n?[]:n,i=e.error,r=e.isLoading,a=Q(H).toLowerCase();return{filteredContacts:t.filter((function(e){return e.name.toLowerCase().includes(a)})),contacts:t,options:{error:i,isLoading:r}}}(),B=I.filteredContacts,D=I.contacts,T=w>0?Math.max(0,(1+w)*y-B.length):0;return(0,R.jsx)(a.Z,{sx:{width:"100%"},children:(0,R.jsxs)(x.Z,{sx:{width:"100%",mb:2},children:[(0,R.jsx)(ie,{contactsCount:D.length,allUsersArray:D}),(0,R.jsx)(d.Z,{children:(0,R.jsxs)(o.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",children:[(0,R.jsx)(te,{order:t,orderBy:f,onRequestSort:function(e,n){c(f===n&&"asc"===t?"desc":"asc"),v(n)},rowCount:D.length}),0!==B.length&&(0,R.jsxs)(s.Z,{children:[ee(B,X(t,f)).slice(w*y,w*y+y).map((function(e,n,t){var i="enhanced-table-checkbox-".concat(n),r=n+1;return(0,R.jsxs)(h.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:[(0,R.jsx)(l.Z,{component:"th",id:i,scope:"row",padding:"normal",align:"right",width:40,children:r}),(0,R.jsx)(l.Z,{align:"left",children:e.name}),(0,R.jsx)(l.Z,{align:"right",children:e.number}),(0,R.jsx)(l.Z,{align:"right",children:(0,R.jsx)(p.Z,{onClick:function(){return n=e.id,void(F||A(n));var n},children:(0,R.jsx)(Z.Z,{})})})]},e.id)})),T>0&&(0,R.jsx)(h.Z,{style:{height:53*T},children:(0,R.jsx)(l.Z,{colSpan:6})})]})]})}),0===B.length?(0,R.jsx)(a.Z,{sx:{width:"100%",p:2,display:"flex",alignItems:"center",justifyContent:"center"},children:b.sY.isEmptyBook}):(0,R.jsx)(u.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:B.length,rowsPerPage:y,page:w,onPageChange:function(e,n){P(n)},onRowsPerPageChange:function(e){q(parseInt(e.target.value,10)),P(0)}})]})})}var ae=t(1214),oe=function(){return(0,R.jsx)(ae.Z,{children:(0,R.jsx)(re,{})})}},1070:function(e,n,t){t.d(n,{Z:function(){return a}});var i=t(9457),r=(t(2791),t(184)),a=function(e){var n=e.children,t=e.autoComplete,a=e.onSubmit;return(0,r.jsx)("form",{onSubmit:a,autoComplete:t,children:(0,r.jsx)(i.x,{display:"flex",flexDirection:"column",gridGap:4,children:n})})}},736:function(e,n,t){t.r(n),t.d(n,{sellectFilter:function(){return i}});var i=function(e){return e.filter}}}]);
//# sourceMappingURL=852.580b32d5.chunk.js.map